\section*{Abstract}

As datacenter network speeds rise, an increasing fraction of server
CPU cycles is consumed by TCP packet processing. To free server CPUs
from this burden, various existing approaches have attempted to
mitigate these overheads, by bypassing the OS kernel, customizing the
TCP stack for an application, or by offloading packet processing to
dedicated hardware. In doing so, these approaches trade security,
agility, or generality for efficiency. Neither trade-off is fully
desirable in the fast-evolving commodity cloud.

We present \softtcp, TCP acceleration as a service. \taas splits the
common case of TCP processing in the datacenter from the OS kernel and
executes it as a lightweight software service on dedicated CPUs. Doing
so allows us to streamline the common case, while still supporting all
of the features of a stock TCP stack, including security, agility, and
generality. In particular, we \emph{linearize} the common case by
removing branches to uncommon cases. Linear code is ideally executable
on the wide, deeply pipelined CPU architecture common in todayâ€™s
servers and has the additional benefit that it provides near-uniform
execution latency. To be workload proportional, \taas dynamically
allocates the appropriate amount of CPUs to accommodate the
lightweight stack, depending on the traffic load. \taas provides up to
50\% higher throughput and 65\% lower latency than the IX kernel
bypass OS for common cloud applications, such as a key-value store and
a real-time analytics framework.
